<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä½ çš„AIæ·±è¹²æ•™ç·´</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='output/style_upload.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
    crossorigin="anonymous"></script>
</head>

<body class="bg-light">
  <main class="container px-md-4 px-lg-5 py-4">

    <h1 class="mb-4">ä½ çš„AIæ·±è¹²æ•™ç·´</h1>
    <div class="welcome-section">
      <p>
        é€™è£¡ä¸åªèƒ½å¹«ä½ çŸ¯æ­£æ·±è¹²å‹•ä½œï¼Œ
        é‚„èƒ½è²¼å¿ƒæé†’æ€éº¼æ”¹æ‰æ›´æ¨™æº–<br>
        æ¯æ¬¡ç·´å®Œé‚„æœƒå¹«ä½ è¨˜éŒ„åˆ†æ•¸ã€æ¬¡æ•¸ï¼Œç”šè‡³é æ¸¬ä¸‹é€±çš„å°ˆå±¬èª²è¡¨<br>
        æ‹ä¸€æ”¯å½±ç‰‡æˆ–ç›´æ¥é–‹å•Ÿå³æ™‚åˆ†ææ¨¡å¼ï¼Œè®“æˆ‘å€‘ä¸€èµ·é–‹å§‹è®Šå¼·å§ï¼ğŸ’ª
      </p>
    </div>
    <!-- å€å¡Šï¼š1. è¼¸å…¥å€‹äººè³‡æ–™ -->
    <section class="card mt-4">
      <div class="card-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-1-circle-fill"
          viewBox="0 0 16 16">
          <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M9.283 4.002H7.971L6.072 5.385v1.271l1.834-1.318h.065V12h1.312z" />
        </svg> è¼¸å…¥å€‹äººè³‡æ–™
      </div>

      <div class="card-body">
        <div class="row g-3 align-items-start">


          <div class="col-md-7">
            <form id="analyzeForm" enctype="multipart/form-data">
              <!-- æ”¾åœ¨å·¦ä¸Šï¼šå€‹äººè³‡æ–™ -->
              <label for="username" class="form-label">ä½¿ç”¨è€…åç¨±*</label>
              <input type="text" id="username" name="username" class="form-control mb-2" required>

              <label for="squat_type" class="form-label">é¸æ“‡æ·±è¹²é«˜åº¦*</label>
              <select id="squat_type" name="squat_type" class="form-select mb-3" required>
                <option value="quarter">å››åˆ†ä¹‹ä¸€è¹²</option>
                <option value="half">åŠè¹²</option>
                <option value="parallel">å¹³è¡Œæ·±è¹²</option>
                <option value="full">å…¨è¹²</option>
              </select>
              <div class="form-text">ï¼ˆå¯åƒè€ƒä¸‹æ–¹æ·±åº¦åœ–ï¼‰</div><br>




              <!-- æ·±è¹²é«˜åº¦åœ–ç‰‡å¡ç‰‡ï¼ˆæ”¾åœ¨è¡¨å–®ä¸‹æ–¹ï¼‰ -->
              <div class="card">
                <img src="{{ url_for('static', filename='output/depth.png') }}" class="card-img-top img-depth"
                  alt="æ·±åº¦åƒè€ƒåœ–ç‰‡">
                <div class="card-body">
                  <h5 class="card-title mb-2">æ·±è¹²é«˜åº¦</h5>
                  <p class="card-text mb-0">
                    (A) å››åˆ†ä¹‹ä¸€è¹² 110â€“140Â°<br>
                    (B) åŠè¹² 80â€“100Â°<br>
                    (C) å¹³è¡Œæ·±è¹² 60â€“80Â°ï¼ˆå¸¸è¦‹ï¼‰<br>
                    (D) å…¨è¹² 40â€“50Â°
                  </p>
                </div>
              </div>
          </div>


          <!-- å³å´ï¼šæª¢æ¸¬æ¨™æº–å¡ç‰‡ -->
          <div class="col-md-5">
            <div class="card h-100 text-center shadow-sm">
              <img src="{{ url_for('static', filename='output/squatpic.png') }}" class="card-img-top img-standard"
                alt="æ·±è¹²åƒè€ƒåœ–ç‰‡">
              <div class="card-body">
                <h5 class="card-title text-start mb-2">æª¢æ¸¬æ¨™æº–</h5>
                <p class="card-text text-start mb-0">
                  1. æ·±åº¦éœ€åœ¨é¸æ“‡ç¯„åœå…§<br>
                  2. é‡å¿ƒé ˆä¿æŒä¸€è‡´<br>
                  3. è†è“‹éœ€èˆ‡è…³å°–æ–¹å‘ä¸€è‡´<br>
                  4. è…³å°–å¤–é–‹ 15â€“40Â°
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </section>

    <!-- æª¢æ¸¬æ–¹å¼ -->
    <div class="card mt-4">
      <div class="card-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-2-circle-fill"
          viewBox="0 0 16 16">
          <path
            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M6.646 6.24c0-.691.493-1.306 1.336-1.306.756 0 1.313.492 1.313 1.236 0 .697-.469 1.23-.902 1.705l-2.971 3.293V12h5.344v-1.107H7.268v-.077l1.974-2.22.096-.107c.688-.763 1.287-1.428 1.287-2.43 0-1.266-1.031-2.215-2.613-2.215-1.758 0-2.637 1.19-2.637 2.402v.065h1.271v-.07Z" />
        </svg>
        é¸æ“‡æª¢æ¸¬æ–¹å¼ (äºŒé¸ä¸€)
      </div>
      <br>
      <h6 class="card-title" style="margin-left: 20px;">ğŸ’¡æ·±è¹²æ‹æ”è¦ç¯„</h6>
      <p class="card-text" style="margin-left: 20px;">
        1.æ‹æ”æ–¹å‘å¿…é ˆç‚ºæ­£é¢ï¼Œèˆ‡äººé«”å¹³è¡Œï¼Œç›¡é‡ä¿æŒç›¸æ©Ÿæ°´å¹³ï¼Œä¸¦ä»¥é«–éƒ¨ç‚ºç•«é¢ä¸­å¿ƒé»ï¼Œé¿å…å‚¾æ–œæˆ–å´æ‹ã€‚<br>
        2.é›™è…¿åœ¨å‹•ä½œé–‹å§‹æ™‚éœ€å®Œå…¨ä¼¸ç›´ã€‚<br>
        3.ä¸å¯ä½¿ç”¨å»£è§’é¡é ­ï¼Œé¿å…ç•«é¢è®Šå½¢ã€‚
      </p>
      <div class="card-body">
        <div class="row g-3">

          <!-- å½±ç‰‡åˆ†æ -->
          <div class="col-sm-6">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-cloud-upload-fill" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                      d="M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0m-.5 14.5V11h1v3.5a.5.5 0 0 1-1 0" />
                  </svg> å½±ç‰‡åˆ†æ</h5>
                <p class="card-text">é¸æ“‡æ­£é¢æ·±è¹²å½±ç‰‡ï¼ˆé™ mp4 æª”æ¡ˆï¼‰</p>
                <input type="file" id="video" name="video" accept="video/mp4" class="form-control mb-3">
                <button type="submit" class="btn btn-primary">é–‹å§‹åˆ†æ</button>
                </form>

                <div id="emojiLoading" style="display:none; text-align:center; font-size:40px;">
                  <span class="emoji emoji0">ğŸ‹ï¸â€â™‚ï¸</span>
                  <span class="emoji emoji1">ğŸ’ª</span>
                  <span class="emoji emoji2">ğŸ”¥</span>
                  <span class="emoji emoji3">â³</span>
                  <div class="loading-text">å½±ç‰‡åˆ†æä¸­ï¼Œè«‹ç¨å€™...</div>
                </div>

                <script>
                  const form = document.getElementById('analyzeForm');
                  const emojiDiv = document.getElementById('emojiLoading');

                  form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const username = form.username.value.trim();
                    const squat_type = form.squat_type.value;

                    if (!username || !squat_type) {
                      alert('è«‹å…ˆå¡«å¯«ä½¿ç”¨è€…åç¨±èˆ‡é¸æ“‡æ·±è¹²é¡å‹ï¼');
                      return;
                    }

                    emojiDiv.style.display = 'block';

                    try {
                      const resp = await fetch('/analyze_ajax', { method: 'POST', body: new FormData(form) });
                      if (!resp.ok) throw new Error('ä¼ºæœå™¨å›æ‡‰é 200');
                      const result = await resp.json();  // è‹¥å¾Œç«¯é JSONï¼Œé€™è£¡æœƒ throw
                      if (result.redirect_url) {
                        window.location.href = result.redirect_url;
                      } else {
                        alert('åˆ†æå¤±æ•—æˆ–æœªå›å‚³ redirect_url');
                      }
                    } catch (err) {
                      alert('é€å‡ºå¤±æ•—ï¼š' + err.message);
                    } finally {
                      emojiDiv.style.display = 'none';
                    }
                  });
                </script>
              </div>
            </div>
          </div>

          <!-- å³æ™‚åˆ†æ -->
          <div class="col-sm-6">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-camera-video-fill" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                      d="M0 5a2 2 0 0 1 2-2h7.5a2 2 0 0 1 1.983 1.738l3.11-1.382A1 1 0 0 1 16 4.269v7.462a1 1 0 0 1-1.406.913l-3.111-1.382A2 2 0 0 1 9.5 13H2a2 2 0 0 1-2-2z" />
                  </svg> å³æ™‚åˆ†æ</h5>
                <p class="card-text">1. å¯ç”¨æ‰‹æ©Ÿä¸‹è¼‰ iVCam æˆ–ä½¿ç”¨ç„¡å»£è§’ webcamã€‚<br>
                  2. å•Ÿå‹•å³æ™‚åˆ†ææ™‚ï¼Œè«‹å…ˆæ“ºå‡º T-poseï¼šé›™æ‰‹å¹³èˆ‰è‡³èˆ‡åœ°é¢å¹³è¡Œï¼Œé›™è…¿ä½µæ”ç«™ç›´ã€‚
                </p>
                <button onclick="redirectToRealtime()" class="btn btn-primary">å•Ÿå‹•é¡é ­</button>
                <script>
                  function redirectToRealtime() {
                    const username = document.getElementById('username').value.trim();
                    const squat_type = document.getElementById('squat_type').value;
                    if (!username || !squat_type) {
                      alert('è«‹å…ˆå¡«å¯«ä½¿ç”¨è€…åç¨±èˆ‡é¸æ“‡æ·±è¹²é¡å‹ï¼');
                      return;
                    }
                    const url = `/realtime?username=${encodeURIComponent(username)}&squat_type=${encodeURIComponent(squat_type)}`;
                    window.location.href = url;
                  }
                </script>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- åº•åˆ—ï¼šåŠŸèƒ½å…¥å£ -->
    <div class="row g-3 mt-4">
      <div class="col-sm-6">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title">æ­·å²ç´€éŒ„</h5>
            <p class="card-text">åŒ…å«æ¯æ¬¡æ·±è¹²æ¬¡æ•¸ã€å¹³å‡åˆ†æ•¸ â€¦</p>
            <a href="{{ url_for('summary_page') }}" class="btn btn-primary">æŸ¥çœ‹</a>
          </div>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="card h-100">
          <div class="card-body">
            <h5 class="card-title">æ¨è–¦ä¸‹é€±èª²è¡¨</h5>
            <p class="card-text">ä½¿ç”¨ FT-Transformer æ¨¡å‹é æ¸¬æœ€é©åˆä½ çš„ä¸‹é€±èª²è¡¨ã€‚</p>
            <a href="#" class="btn btn-primary">Go</a>
          </div>
        </div>
      </div>
    </div>

    <hr class="my-4">

  </main>
</body>

</html>